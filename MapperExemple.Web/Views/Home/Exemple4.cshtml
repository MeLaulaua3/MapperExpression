@model MapperExemple.Web.Models.SortedCustomerModel

@{
    ViewBag.Title = "Exemple 4";
}
<script>
    $(document).ready(function() {
        $(".header").click(function (evt) {
            var sortfield = $(evt.target).text();
              if ($("#SortField").val() == sortfield){
                 if($("#SortDirection").val()=="ascending") {
                    $("#SortDirection").val("descending");
                 }
                else {
                    $("#SortDirection").val("ascending");
                 }
      }
      else  {
         $("#SortField").val(sortfield);
         $("#SortDirection").val("ascending");
      }
      evt.preventDefault();
      $("form").submit();
    });
   });
</script>
<h2> @ViewBag.Message</h2>

@using (Html.BeginForm("Exemple4", "Home", FormMethod.Post))
{
    @Html.Hidden("SortField", Model.SortField)
    @Html.Hidden("SortDirection", Model.SortDirection)
    <table class="table">
        <tr>
            <th>
                <a href="#" data-sorting="ascending" class="header">CompanyName</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">ContactName</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">ContactTitle</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">Address</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">City</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">Region</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">PostalCode</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">Country</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">Phone</a>
            </th>
            <th>
                <a href="#" data-sorting="ascending" class="header">Fax</a>
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Customers)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.CompanyName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ContactName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ContactTitle)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Address)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Region)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PostalCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Country)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Phone)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Fax)
            </td>

        </tr>
        }

    </table>
}
